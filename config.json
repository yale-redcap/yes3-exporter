{
    "name": "Yes3 Exporter",

    "namespace": "Yale\\Yes3FieldMapper",

    "description": "YES3 Exporter",

    "prefix": "yes3_exporter",

    "authors": [
    {
        "name": "Peter Charpentier",
        "email": "peter.charpentier@criwebtools.com",
        "institution": "CRI Web Tools LLC"
        }
    ],

    "versions": [
        {
            "number": "0.3.0",
            "date": "2022-03-16",
            "description": "Export logging",
            "comments": ""
        },
        {
            "number": "0.2.1",
            "date": "2022-03-06",
            "description": "Exports and downloads functioning",
            "comments": ""
        },
        {
            "number": "0.1.2",
            "date": "2022-02-26",
            "description": "Minor change to config.json",
            "comments": ""
        },
        {
            "number": "0.1.1",
            "date": "2022-02-24",
            "description": "Settings and Specifications functional",
            "comments": ""
        },
        {
            "number": "0.0.1",
            "date": "2021-12-29",
            "description": "and away we go",
            "comments": ""
        }
    ],

    "permissions": [
        "redcap_module_link_check_display"
    ],

    "links": {
        "project": [
            {
                "name": "YES3 Exporter Editor and Downloads",
                "icon": "fab fa-connectdevelop",
                "url":  "plugins/yes3_export_editor.php"
            },
            {
                "name": "YES3 Exporter Event Prefixes",
                "icon": "fab fa-connectdevelop",
                "url":  "plugins/yes3_export_prefixes.php"
            },
            {
                "name": "YES3 Exporter Logs",
                "icon": "fab fa-connectdevelop",
                "url":  "plugins/yes3_export_logs.php"
            },
            {
                "name": "YES3 Exporter Documentation",
                "icon": "fab fa-connectdevelop",
                "url":  "plugins/yes3_exporter_documentation.php?doc=README",
                "target": "blank"
            },
            {
                "name": "YES3 Exporter Changelog",
                "icon": "fab fa-connectdevelop",
                "url":  "plugins/yes3_exporter_documentation.php?doc=changelog%2Fyes3_exporter_changelog",
                "target": "blank"
            }
        ]
    },

    "system-settings": [
        {
            "key":   "system-cron-header",
            "type" : "descriptive",
            "name":  "<h5>YES3 EXPORTER CRON JOB</h5><p>The YES3 Exporter perfoms a number daily tasks for each project. By default all of the daily tasks are run at 11 minutes past midnight, but you may specify a different time to run these tasks.</p>"
        },
        {
            "key": "cron-time",
            "name": "Time to run all daily tasks (hh:mm)",
            "type": "dropdown",
            "choices": [
                {"name":"00:11","value":"00:11:00"},
                {"name":"01:11","value":"01:11:00"},
                {"name":"02:11","value":"02:11:00"},
                {"name":"03:11","value":"03:11:00"},
                {"name":"04:11","value":"04:11:00"},
                {"name":"05:11","value":"05:11:00"},
                {"name":"06:11","value":"06:11:00"},
                {"name":"07:11","value":"07:11:00"},
                {"name":"08:11","value":"08:11:00"},
                {"name":"09:11","value":"09:11:00"},
                {"name":"10:11","value":"10:11:00"},
                {"name":"11:11","value":"11:11:00"},
                {"name":"12:11","value":"12:11:00"},
                {"name":"13:11","value":"13:11:00"},
                {"name":"14:11","value":"14:11:00"},
                {"name":"15:11","value":"15:11:00"},
                {"name":"16:11","value":"16:11:00"},
                {"name":"17:11","value":"17:11:00"},
                {"name":"18:11","value":"18:11:00"},
                {"name":"19:11","value":"19:11:00"},
                {"name":"20:11","value":"20:11:00"},
                {"name":"21:11","value":"21:11:00"},
                {"name":"22:11","value":"22:11:00"},
                {"name":"23:11","value":"23:11:00"}
            ],
            "required": false
        },
        {
            "key": "cron-ran-at",
            "name": "The cron job was last run at",
            "type": "text",
            "required": false
        },
        {
            "key": "cron-log",
            "name": "Most recent cron log entry",
            "type": "textarea",
            "required": false
        }
    ],

    "project-settings": [
        {
            "key": "email-notifications-header",
            "type" : "descriptive",
            "name": "<h5>DAILY EMAIL NOTIFICATIONS</h5><p>You may elect to receive daily summaries of YES3 Exporter actions by email.</p>"
        },
        {
            "key": "notification-email-enable",
            "name": "Enable email notifications",
            "type": "radio",
            "required": false,
            "choices":[
                {
                    "value":"N",
                    "name":"No"
                },
                {
                    "value":"Y",
                    "name":"Yes"
                }
            ]
        },
        {
            "key": "notification-email",
            "name": "Email address for notifications",
            "type": "email",
            "required": false,
            "branchingLogic": {
                "conditions": [
                    {
                        "field": "notification-email-enable",
                        "value": "Y"        
                    }
                ]
            }
        },
        {
            "key": "notification-email-ran-at",
            "name": "Time email notifications were last sent succesfully",
            "type": "text",
            "required": false,
            "super-users-only": true,
            "branchingLogic": {
                "conditions": [
                    {
                        "field": "notification-email-enable",
                        "value": "Y"        
                    }
                ]
            }
        },
        {
            "key": "toast-the-host",
            "type" : "descriptive",
            "name": "<h5>HOST FILE SYSTEM EXPORTS</h5><p>YES3 Exporter can export to the host file system, n.b. to automounts pointing to secure institutional file shares. This will require services from your REDCap host system administrator, and the blessing of your Information Security Officer.</p>",
            "super-users-only": true
        },
        {
            "key": "enable-host-filesystem-exports",
            "name": "Enable export to host file system",
            "type": "radio",
            "required": false,
            "super-users-only": true,
            "choices":[
                {
                    "value":"N",
                    "name":"No"
                },
                {
                    "value":"Y",
                    "name":"Yes"
                }
            ]
        },
        {
            "key": "export-target-folder",
            "name": "Host file system folder",
            "type": "text",
            "super-users-only": true,
            "required": false,
            "branchingLogic": {
                "field": "enable-host-filesystem-exports",
                "value": "Y"
            }
        },
        {
            "key": "enable-user-data-downloads",
            "name": "Also allow user data downloads",
            "type": "radio",
            "required": false,
            "super-users-only": true,
            "branchingLogic": {
                "field": "enable-host-filesystem-exports",
                "value": "Y"
            },
            "choices":[
                {
                    "value":"N",
                    "name":"No"
                },
                {
                    "value":"Y",
                    "name":"Yes"
                }
            ]
        },
        {
            "key":   "backup-retention-header",
            "type" : "descriptive",
            "name":  "<h5>EXPORT SPECIFICATION BACKUP RETENTION</h5><p>By default, 20 generations are retained for each export specification, and can be restored using the 'undo' feature. You may change this number, or elect to retain all generations.</p>"
        },
        {
            "key": "export-spec-backup-retention",
            "name": "Specification backups to retain (default is 20)",
            "type": "dropdown",
            "choices": [
                {"name":"20",  "value":"20"},
                {"name":"40",  "value":"40"},
                {"name":"60",  "value":"60"},
                {"name":"80",  "value":"80"},
                {"name":"100", "value":"100"},
                {"name":"retain all backups",  "value":"all"}
            ],
            "required": false
        },
        {
            "key":   "project-cron-header",
            "type" : "descriptive",
            "name":  "<h5>CRON JOBS</h5><p>The YES3 Exporter perfoms a number daily tasks for each project. Below is the daily cron log for this project.</p>"
        },
        {
            "key": "project-cron-log",
            "name": "Cron log for this project",
            "type": "textarea",
            "required": false
        },
        {
            "key": "buyer-beware",
            "type" : "descriptive",
            "name": "<h5>CAVEAT EMPTOR</h5><p>See the documention, under 'beta features', for brief descriptions of features under development that are available to designers. There is no guarantee that any beta feature will be moved to production. Feedback on beta features is welcome.</p>"
        },
        {
            "key": "beta",
            "name": "Access to beta features",
            "type": "radio",
            "required": false,
            "choices":[
                {
                    "value":"N",
                    "name":"No"
                },
                {
                    "value":"Y",
                    "name":"Yes"
                }
            ]
        }

    ],

    "crons":[
        {
            "cron_name": "yes3_exporter_cron",
            "cron_description": "YES3 Exporter cron manager",
            "method": "yes3_exporter_cron",
            "cron_frequency": "60",
            "cron_max_run_time": "60"
        }
    ],

    "no-auth-pages": [
    ],

    "compatibility": {
    "php-version-min": "7.2",
    "redcap-version-min": "10.0.0"
    },

    "framework-version": 5
}